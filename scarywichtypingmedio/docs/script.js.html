<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: script.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: script.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** 
    @file Script principal para el funcionamiento del juego.
    @author Mario Pérez Pizarro &lt;mperezpizarro.guadalupe@alumnado.fundacionloyola.net>
    @license MPL-2.0
*/
'use strict'
/**
 *Clase principal que controla la vista y el modelo.
 * @class Juego
 */
class Juego{
    constructor(){
        this.vista=new Vista();
        this.modelo=new Modelo();
        this.generador=null;
        this.animador=null;
        this.maincontainer=null;
        window.onload=this.iniciar.bind(this);
    }
    iniciar(){
        console.log("Juego iniciado");
        this.maincontainer=document.getElementById("maincontainer");
        this.vista.palaindex.htmlbra=this.maincontainer;
        this.generador=window.setInterval(this.generarPalabra.bind(this),5000);
        this.animador=window.setInterval(this.vista.moverPalabra.bind(this.vista), 100);
        window.onkeypress=this.pulsar.bind(this);
    }
    generarPalabra(){
        let palabraEnviada=this.modelo.crearPalabra();
        this.vista.dibujar(palabraEnviada);
    }
    pulsar(e){
        let letra=e.key;
        let palabras=this.maincontainer.querySelectorAll(".palabra");
        for(let palabra of palabras){
            let span=palabra.children.item(0);
            let nodoTexto=palabra.childNodes[1];
            let texto=nodoTexto.nodeValue;
            let caracterTexto=texto.charAt(0)
            if(letra==caracterTexto){
                span.textContent+=letra;
                nodoTexto.nodeValue=texto.substring(1);
            }else{
                nodoTexto.nodeValue=span.innerHTML+texto;
                span.textContent="";
            }
            if(nodoTexto.nodeValue.length==0){
                palabra.remove();
                this.modelo.sumarPuntuacion();
                this.modelo.mostrarPuntuacion();
            }
        }
    }
}
/**
 *Clase encargada de mostrar y quitar elementos en pantallas.
 * @class Vista
 */
class Vista{
    constructor(){
        this.palabra=null;
    }
    dibujar(palabraEnviada){
        let palabra=document.createElement("div");
        let span=document.createElement("span");
        maincontainer.appendChild(palabra);
        palabra.classList.add("palabra");
        palabra.style.top="0px";
        palabra.style.left=Math.floor(Math.random()*1000)+"px";
        palabra.appendChild(span);
        palabra.appendChild(document.createTextNode(palabraEnviada));
    }
    moverPalabra(){
        let palabras=maincontainer.querySelectorAll(".palabra");
        for(let palabra of palabras){
            let top=parseInt(palabra.style.top);
            top+=2;
            palabra.style.top=top+"px";
            if(top>700){
                palabra.remove();
                /*this.modelo.quitarVida();
                if(this.modelo.vidas=0)
                    alert("FIN DE LA PARTIDA");*/
            }
        }
    }
}
/**
 *Parte lógica del programa.
 * @class Modelo
 */
class Modelo{
    constructor(){
        this.palabras=["cachopo", "petanca", "ordenador", "esternocleidomastoideo", 
        "anguila", "bellota", "comida", "patatas", "receta", "teclado", "escritura",
        "enciclopedia", "libreta", "papelera", "oficina", "papeleta"];
        this.puntuacion=0;
        this.vidas=3;
    }
    crearPalabra(){
        return this.palabras[Math.floor(Math.random()*this.palabras.length)];
    }
    sumarPuntuacion(){
        this.puntuacion++;
    }
    mostrarPuntuacion(){
        console.log(this.puntuacion);
    }
    quitarVida(){
        this.vidas--;
    }
}
let juego=new Juego();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Juego.html">Juego</a></li><li><a href="Modelo.html">Modelo</a></li><li><a href="Vista.html">Vista</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Nov 12 2021 12:32:37 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
